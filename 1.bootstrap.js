(window["webpackJsonp"] = window["webpackJsonp"] || []).push([[1],{

/***/ "./app/app.component.ts":
/*!******************************!*\
  !*** ./app/app.component.ts ***!
  \******************************/
/*! exports provided: AppComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"AppComponent\", function() { return AppComponent; });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.es6.js\");\n/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ \"./node_modules/@angular/core/fesm5/core.js\");\n/* harmony import */ var _game_service__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./game.service */ \"./app/game.service.ts\");\n/* harmony import */ var ng_game_of_life__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ng-game-of-life */ \"./node_modules/ng-game-of-life/ng_game_of_life.js\");\n/* harmony import */ var stats_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! stats.js */ \"./node_modules/stats.js/build/stats.min.js\");\n/* harmony import */ var stats_js__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(stats_js__WEBPACK_IMPORTED_MODULE_4__);\n\n\n\n\n\nconst stats = new stats_js__WEBPACK_IMPORTED_MODULE_4___default.a();\nstats.showPanel(0);\ndocument.body.appendChild(stats.dom);\nconst CELL_SIZE = 10; // px\nconst LINE_WDITH = 2;\nconst GRID_COLOR = \"#CCCCCC\";\nconst DEAD_COLOR = \"#FFFFFF\";\nconst ALIVE_COLOR = \"#000000\";\nlet AppComponent = class AppComponent {\n    constructor(game) {\n        this.game = game;\n        this.title = \"galaxy gen app\";\n        this.animationId = null;\n    }\n    ngAfterViewInit() {\n        const canvas = this.myCanvas.nativeElement;\n        this.ctx = canvas.getContext(\"2d\");\n        const canvasHeight = (CELL_SIZE + LINE_WDITH) * this.game.height + LINE_WDITH;\n        const canvasWidth = (CELL_SIZE + LINE_WDITH) * this.game.width + LINE_WDITH;\n        canvas.width = canvasWidth;\n        canvas.height = canvasHeight;\n        canvas.style.width = `${canvasWidth / 2}px`;\n        canvas.style.height = `${canvasHeight / 2}px`;\n        this.drawGrid();\n        this.drawCells();\n    }\n    drawGrid() {\n        const { width, height } = this.game;\n        this.ctx.beginPath();\n        this.ctx.strokeStyle = GRID_COLOR;\n        // Vertical lines.\n        for (let i = 0; i <= width; i++) {\n            this.ctx.moveTo(i * (CELL_SIZE + LINE_WDITH) + LINE_WDITH, 0);\n            this.ctx.lineTo(i * (CELL_SIZE + LINE_WDITH) + LINE_WDITH, (CELL_SIZE + LINE_WDITH) * height + LINE_WDITH);\n        }\n        // Horizontal lines.\n        for (let j = 0; j <= height; j++) {\n            this.ctx.moveTo(0, j * (CELL_SIZE + LINE_WDITH) + LINE_WDITH);\n            this.ctx.lineTo((CELL_SIZE + LINE_WDITH) * width + LINE_WDITH, j * (CELL_SIZE + LINE_WDITH) + LINE_WDITH);\n        }\n        this.ctx.stroke();\n    }\n    drawCells() {\n        const cells = this.game.getCells();\n        const { width, height } = this.game;\n        this.ctx.beginPath();\n        for (let row = 0; row < height; row++) {\n            for (let col = 0; col < width; col++) {\n                const idx = this.game.getIndex(row, col);\n                this.ctx.fillStyle =\n                    cells[idx] === ng_game_of_life__WEBPACK_IMPORTED_MODULE_3__[\"Cell\"].Dead ? DEAD_COLOR : ALIVE_COLOR;\n                this.ctx.fillRect(col * (CELL_SIZE + LINE_WDITH) + LINE_WDITH, row * (CELL_SIZE + LINE_WDITH) + LINE_WDITH, CELL_SIZE, CELL_SIZE);\n            }\n        }\n        this.ctx.stroke();\n    }\n    loop() {\n        stats.begin();\n        this.game.tick();\n        this.drawGrid();\n        this.drawCells();\n        stats.end();\n        this.animationId = requestAnimationFrame(this.loop.bind(this));\n    }\n    play() {\n        this.loop();\n    }\n    pause() {\n        cancelAnimationFrame(this.animationId);\n        this.animationId = null;\n    }\n    get isPaused() {\n        return this.animationId === null;\n    }\n    togglePlay() {\n        if (this.isPaused) {\n            this.play();\n        }\n        else {\n            this.pause();\n        }\n    }\n    toggleCells(event) {\n        const canvas = this.myCanvas.nativeElement;\n        const { width, height } = this.game;\n        const boundingRect = canvas.getBoundingClientRect();\n        const scaleX = canvas.width / boundingRect.width;\n        const scaleY = canvas.height / boundingRect.height;\n        const canvasLeft = ((event.clientX - boundingRect.left) * scaleX) / 2;\n        const canvasTop = ((event.clientY - boundingRect.top) * scaleY) / 2;\n        const row = Math.min(Math.floor((canvasTop / (CELL_SIZE + LINE_WDITH)) * 2), height - LINE_WDITH);\n        const col = Math.min(Math.floor((canvasLeft / (CELL_SIZE + LINE_WDITH)) * 2), width - LINE_WDITH);\n        if (event.metaKey) {\n            this.insertShape(\"glider\", row, col);\n        }\n        else if (event.shiftKey) {\n            this.insertShape(\"ship\", row, col);\n        }\n        else {\n            this.game.toggleCell(row, col);\n        }\n        this.drawGrid();\n        this.drawCells();\n    }\n    insertShape(shape, row, col) {\n        const collection = {\n            glider: [\n                [row, col],\n                [row + 2, col - 1],\n                [row + 2, col],\n                [row + 2, col + 1],\n                [row + 1, col + 1]\n            ],\n            ship: [\n                [row, col + 1],\n                [row, col + 2],\n                [row, col + 3],\n                [row + 3, col + 3],\n                [row, col + 4],\n                [row + 1, col + 4],\n                [row + 2, col + 4],\n                [row + 1, col],\n                [row + 3, col]\n            ]\n        };\n        collection[shape].forEach((set) => {\n            this.game.toggleCell(set[0], set[1]);\n        });\n    }\n};\ntslib__WEBPACK_IMPORTED_MODULE_0__[\"__decorate\"]([\n    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__[\"ViewChild\"])(\"myCanvas\"),\n    tslib__WEBPACK_IMPORTED_MODULE_0__[\"__metadata\"](\"design:type\", _angular_core__WEBPACK_IMPORTED_MODULE_1__[\"ElementRef\"])\n], AppComponent.prototype, \"myCanvas\", void 0);\nAppComponent = tslib__WEBPACK_IMPORTED_MODULE_0__[\"__decorate\"]([\n    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__[\"Component\"])({\n        selector: \"app-root\",\n        template: `\n    <div class=\"main\">\n      <canvas #myCanvas (click)=\"toggleCells($event)\"></canvas>\n    </div>\n    <div class=\"actions\">\n      <button (click)=\"togglePlay()\">\n        {{ isPaused ? \"Play\" : \"Pause\" }}\n      </button>\n    </div>\n  `\n    }),\n    tslib__WEBPACK_IMPORTED_MODULE_0__[\"__metadata\"](\"design:paramtypes\", [_game_service__WEBPACK_IMPORTED_MODULE_2__[\"GameService\"]])\n], AppComponent);\n\n\n\n//# sourceURL=webpack:///./app/app.component.ts?");

/***/ }),

/***/ "./app/app.module.ts":
/*!***************************!*\
  !*** ./app/app.module.ts ***!
  \***************************/
/*! exports provided: AppModule */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"AppModule\", function() { return AppModule; });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.es6.js\");\n/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ \"./node_modules/@angular/core/fesm5/core.js\");\n/* harmony import */ var _angular_platform_browser__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/platform-browser */ \"./node_modules/@angular/platform-browser/fesm5/platform-browser.js\");\n/* harmony import */ var _app_component__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app.component */ \"./app/app.component.ts\");\n/* harmony import */ var _game_service__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./game.service */ \"./app/game.service.ts\");\n\n\n\n\n\nlet AppModule = class AppModule {\n};\nAppModule = tslib__WEBPACK_IMPORTED_MODULE_0__[\"__decorate\"]([\n    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__[\"NgModule\"])({\n        declarations: [_app_component__WEBPACK_IMPORTED_MODULE_3__[\"AppComponent\"]],\n        imports: [_angular_platform_browser__WEBPACK_IMPORTED_MODULE_2__[\"BrowserModule\"]],\n        providers: [_game_service__WEBPACK_IMPORTED_MODULE_4__[\"GameService\"]],\n        bootstrap: [_app_component__WEBPACK_IMPORTED_MODULE_3__[\"AppComponent\"]]\n    })\n], AppModule);\n\n\n\n//# sourceURL=webpack:///./app/app.module.ts?");

/***/ }),

/***/ "./app/game.service.ts":
/*!*****************************!*\
  !*** ./app/game.service.ts ***!
  \*****************************/
/*! exports provided: GameService */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"GameService\", function() { return GameService; });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"./node_modules/tslib/tslib.es6.js\");\n/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ \"./node_modules/@angular/core/fesm5/core.js\");\n/* harmony import */ var ng_game_of_life__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ng-game-of-life */ \"./node_modules/ng-game-of-life/ng_game_of_life.js\");\n/* harmony import */ var ng_game_of_life_ng_game_of_life_bg__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ng-game-of-life/ng_game_of_life_bg */ \"./node_modules/ng-game-of-life/ng_game_of_life_bg.wasm\");\n\n\n\n// @ts-ignore\n\nlet GameService = class GameService {\n    constructor() {\n        this.universe = ng_game_of_life__WEBPACK_IMPORTED_MODULE_2__[\"Universe\"].new();\n    }\n    get width() {\n        return this.universe.width();\n    }\n    get height() {\n        return this.universe.height();\n    }\n    getCells() {\n        const cellsPtr = this.universe.cells();\n        const cells = new Uint8Array(ng_game_of_life_ng_game_of_life_bg__WEBPACK_IMPORTED_MODULE_3__[\"memory\"].buffer, cellsPtr, this.width * this.height);\n        return cells;\n    }\n    getIndex(row, column) {\n        return row * this.width + column;\n    }\n    tick() {\n        this.universe.tick();\n    }\n    toggleCell(row, col) {\n        this.universe.toggle_cell(row, col);\n    }\n};\nGameService = tslib__WEBPACK_IMPORTED_MODULE_0__[\"__decorate\"]([\n    Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__[\"Injectable\"])({\n        providedIn: \"root\"\n    }),\n    tslib__WEBPACK_IMPORTED_MODULE_0__[\"__metadata\"](\"design:paramtypes\", [])\n], GameService);\n\n\n\n//# sourceURL=webpack:///./app/game.service.ts?");

/***/ }),

/***/ "./index.ts":
/*!******************!*\
  !*** ./index.ts ***!
  \******************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var core_js_es7_reflect__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! core-js/es7/reflect */ \"./node_modules/core-js/es7/reflect.js\");\n/* harmony import */ var core_js_es7_reflect__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_es7_reflect__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var zone_js_dist_zone__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! zone.js/dist/zone */ \"./node_modules/zone.js/dist/zone.js\");\n/* harmony import */ var zone_js_dist_zone__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(zone_js_dist_zone__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _angular_platform_browser_dynamic__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/platform-browser-dynamic */ \"./node_modules/@angular/platform-browser-dynamic/fesm5/platform-browser-dynamic.js\");\n/* harmony import */ var _app_app_module__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/app.module */ \"./app/app.module.ts\");\n// angular polyfills\n\n\n\n\nObject(_angular_platform_browser_dynamic__WEBPACK_IMPORTED_MODULE_2__[\"platformBrowserDynamic\"])()\n    .bootstrapModule(_app_app_module__WEBPACK_IMPORTED_MODULE_3__[\"AppModule\"])\n    .catch(err => console.log(err));\n\n\n//# sourceURL=webpack:///./index.ts?");

/***/ }),

/***/ "./node_modules/@angular/core/fesm5 lazy recursive":
/*!****************************************************************!*\
  !*** ./node_modules/@angular/core/fesm5 lazy namespace object ***!
  \****************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncaught exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = \"./node_modules/@angular/core/fesm5 lazy recursive\";\n\n//# sourceURL=webpack:///./node_modules/@angular/core/fesm5_lazy_namespace_object?");

/***/ })

}]);